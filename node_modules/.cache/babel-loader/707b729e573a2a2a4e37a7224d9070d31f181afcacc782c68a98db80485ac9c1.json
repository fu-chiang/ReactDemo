{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\A3423\\\\Desktop\\\\Project\\\\react-cra\\\\src\\\\pages\\\\admin\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport { Outlet, useNavigate, NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport { useEffect, useReducer } from 'react';\nimport Message from '../../components/Message';\nimport { MessageContext, messageReducer, initState } from '../../store/messageStore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  var _document$cookie$spli;\n  const navigate = useNavigate();\n  const reducer = useReducer(messageReducer, initState);\n  const logout = () => {\n    document.cookie = 'hexToken=;';\n    navigate('/login');\n  };\n\n  // 取出 Token\n  const token = (_document$cookie$spli = document.cookie.split('; ').find(row => row.startsWith('hexToken='))) === null || _document$cookie$spli === void 0 ? void 0 : _document$cookie$spli.split('=')[1];\n  axios.defaults.headers.common['Authorization'] = token;\n  useEffect(() => {\n    if (!token) {\n      return navigate('/login');\n    }\n    (async () => {\n      try {\n        await axios.post('/v2/api/user/check');\n      } catch (error) {\n        if (!error.response.data.success) {\n          navigate('/login');\n        }\n      }\n    })();\n  }, [navigate, token]);\n  return /*#__PURE__*/_jsxDEV(MessageContext.Provider, {\n    value: reducer,\n    children: [/*#__PURE__*/_jsxDEV(Message, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navbar navbar-expand-lg bg-dark\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white mb-0\",\n          children: \"\\u8D85\\u5F37\\u65E9\\u9910\\u5F8C\\u53F0\\u7BA1\\u7406\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"navbar-toggler\",\n          type: \"button\",\n          \"data-bs-toggle\": \"collapse\",\n          \"data-bs-target\": \"#navbarNav\",\n          \"aria-controls\": \"navbarNav\",\n          \"aria-expanded\": \"false\",\n          \"aria-label\": \"Toggle navigation\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"navbar-toggler-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"collapse navbar-collapse justify-content-end\",\n          id: \"navbarNav\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"navbar-nav\",\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-sm btn-light\",\n                onClick: logout,\n                children: \"\\u767B\\u51FA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      style: {\n        minHeight: 'calc(100vh - 56px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-light\",\n        style: {\n          width: '200px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group list-group-flush\",\n          children: [/*#__PURE__*/_jsxDEV(NavLink, {\n            className: \"list-group-item list-group-item-action py-3\",\n            to: \"/admin/products\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-cup-fill me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this), \"\\u7522\\u54C1\\u5217\\u8868\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/admin/coupons\",\n            className: \"list-group-item list-group-item-action py-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-ticket-perforated-fill me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), \"\\u512A\\u60E0\\u5377\\u5217\\u8868\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n            className: \"list-group-item list-group-item-action py-3\",\n            to: \"/admin/orders\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-receipt me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this), \"\\u8A02\\u55AE\\u5217\\u8868\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-100\",\n        children: token && /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"S+q03z9qSNwBSsx0dgX/1LDFKl0=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["Outlet","useNavigate","NavLink","axios","useEffect","useReducer","Message","MessageContext","messageReducer","initState","Dashboard","navigate","reducer","logout","document","cookie","token","split","find","row","startsWith","defaults","headers","common","post","error","response","data","success","minHeight","width"],"sources":["C:/Users/A3423/Desktop/Project/react-cra/src/pages/admin/Dashboard.js"],"sourcesContent":["import { Outlet, useNavigate, NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport { useEffect, useReducer } from 'react';\nimport Message from '../../components/Message';\nimport { MessageContext, messageReducer, initState } from '../../store/messageStore';\n\nfunction Dashboard() {\n  const navigate = useNavigate();\n  const reducer = useReducer(messageReducer, initState);\n\n  const logout = () => {\n    document.cookie = 'hexToken=;';\n    navigate('/login');\n  };\n\n  // 取出 Token\n  const token = document.cookie\n    .split('; ')\n    .find((row) => row.startsWith('hexToken='))\n    ?.split('=')[1];\n  axios.defaults.headers.common['Authorization'] = token;\n  useEffect(() => {\n    if (!token) {\n      return navigate('/login');\n    }\n    (async () => {\n      try {\n        await axios.post('/v2/api/user/check');\n      } catch (error) {\n        if (!error.response.data.success) {\n          navigate('/login');\n        }\n      }\n    })();\n  }, [navigate, token]);\n\n  return (\n    <MessageContext.Provider value={reducer}>\n      <Message />\n      <nav className='navbar navbar-expand-lg bg-dark'>\n        <div className='container-fluid'>\n          <p className='text-white mb-0'>超強早餐後台管理</p>\n          <button\n            className='navbar-toggler'\n            type='button'\n            data-bs-toggle='collapse'\n            data-bs-target='#navbarNav'\n            aria-controls='navbarNav'\n            aria-expanded='false'\n            aria-label='Toggle navigation'\n          >\n            <span className='navbar-toggler-icon' />\n          </button>\n          <div\n            className='collapse navbar-collapse justify-content-end'\n            id='navbarNav'\n          >\n            <ul className='navbar-nav'>\n              <li className='nav-item'>\n                <button\n                  type='button'\n                  className='btn btn-sm btn-light'\n                  onClick={logout}\n                >\n                  登出\n                </button>\n              </li>\n\n            </ul>\n          </div>\n        </div>\n      </nav>\n      <div className='d-flex' style={{ minHeight: 'calc(100vh - 56px)' }}>\n        <div className='bg-light' style={{ width: '200px' }}>\n          <ul className='list-group list-group-flush'>\n            <NavLink\n              className='list-group-item list-group-item-action py-3'\n              to='/admin/products'\n            >\n              <i className='bi bi-cup-fill me-2' />\n              產品列表\n            </NavLink>\n            <NavLink\n              to='/admin/coupons'\n              className='list-group-item list-group-item-action py-3'\n            >\n              <i className='bi bi-ticket-perforated-fill me-2' />\n              優惠卷列表\n            </NavLink>\n            <NavLink\n              className='list-group-item list-group-item-action py-3'\n              to='/admin/orders'\n            >\n              <i className='bi bi-receipt me-2' />\n              訂單列表\n            </NavLink>\n          </ul>\n        </div>\n        <div className='w-100'>{token && <Outlet />}</div>\n      </div>\n    </MessageContext.Provider>\n  );\n}\n\nexport default Dashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}