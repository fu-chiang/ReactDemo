{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\A3423\\\\Desktop\\\\Project\\\\react-cra\\\\src\\\\pages\\\\admin\\\\AdminOrders.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport axios from \"axios\";\nimport OrderModal from \"../../components/OrderModal\";\nimport Pagination from \"../../components/Pagination\";\nimport { Modal } from \"bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminOrders() {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [pagination, setPagination] = useState({});\n  // type: 決定 modal 展開的用途\n  const [type, setType] = useState('create'); // edit\n  const [tempOrder, setTempOrder] = useState({});\n  const orderModal = useRef(null);\n  useEffect(() => {\n    orderModal.current = new Modal('#orderModal', {\n      backdrop: 'static'\n    });\n    getOrders();\n  }, []);\n  const getOrders = async function () {\n    let page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    const res = await axios.get(`/v2/api/${process.env.REACT_APP_API_PATH}/admin/orders?page=${page}`);\n    console.log(res);\n    setOrders(res.data.orders);\n    setPagination(res.data.pagination);\n  };\n  const openOrderModal = order => {\n    setTempOrder(order);\n    orderModal.current.show();\n  };\n  const closeOrderModal = () => {\n    setTempOrder({});\n    orderModal.current.hide();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-3\",\n    children: [/*#__PURE__*/_jsxDEV(OrderModal, {\n      closeProductModal: closeOrderModal,\n      getOrders: getOrders,\n      tempOrder: tempOrder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u8A02\\u55AE\\u5217\\u8868\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u8A02\\u55AE id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u8CFC\\u8CB7\\u7528\\u6236\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u8A02\\u55AE\\u91D1\\u984D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u4ED8\\u6B3E\\u72C0\\u614B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u4ED8\\u6B3E\\u65E5\\u671F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u7559\\u8A00\\u8A0A\\u606F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"\\u7DE8\\u8F2F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: orders.map(order => {\n          var _order$user, _order$user2;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [(_order$user = order.user) === null || _order$user === void 0 ? void 0 : _order$user.name, (_order$user2 = order.user) === null || _order$user2 === void 0 ? void 0 : _order$user2.email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"$\", order.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.is_paid ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-success fw-bold\",\n                children: \"\\u4ED8\\u6B3E\\u5B8C\\u6210\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 21\n              }, this) : '未付款'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.paid_date ? new Date(order.paid_date * 1000).toLocaleString() : '未付款'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-primary btn-sm\",\n                onClick: () => {\n                  openOrderModal(order);\n                },\n                children: \"\\u67E5\\u770B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)]\n          }, order.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      pagination: pagination,\n      changePage: getOrders\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminOrders, \"6Kb0aLAwwn/93XLTei92MGZAVMg=\");\n_c = AdminOrders;\nexport default AdminOrders;\nvar _c;\n$RefreshReg$(_c, \"AdminOrders\");","map":{"version":3,"names":["useEffect","useRef","useState","axios","OrderModal","Pagination","Modal","AdminOrders","orders","setOrders","pagination","setPagination","type","setType","tempOrder","setTempOrder","orderModal","current","backdrop","getOrders","page","res","get","process","env","REACT_APP_API_PATH","console","log","data","openOrderModal","order","show","closeOrderModal","hide","map","id","user","name","email","total","is_paid","paid_date","Date","toLocaleString","message"],"sources":["C:/Users/A3423/Desktop/Project/react-cra/src/pages/admin/AdminOrders.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport axios from \"axios\";\nimport OrderModal from \"../../components/OrderModal\";\nimport Pagination from \"../../components/Pagination\";\nimport { Modal } from \"bootstrap\";\n\nfunction AdminOrders() {\n  const [orders, setOrders] = useState([]);\n  const [pagination, setPagination] = useState({});\n  // type: 決定 modal 展開的用途\n  const [type, setType] = useState('create'); // edit\n  const [tempOrder, setTempOrder] = useState({});\n\n  const orderModal = useRef(null);\n  useEffect(() => {\n    orderModal.current = new Modal('#orderModal', {\n      backdrop: 'static',\n    });\n\n    getOrders();\n  }, []);\n\n  const getOrders = async (page = 1) => {\n    const res = await axios.get(\n      `/v2/api/${process.env.REACT_APP_API_PATH}/admin/orders?page=${page}`,\n    );\n    console.log(res);\n    setOrders(res.data.orders);\n    setPagination(res.data.pagination);\n  }\n\n  const openOrderModal = (order) => {\n    setTempOrder(order);\n    orderModal.current.show();\n  }\n  const closeOrderModal = () => {\n    setTempOrder({});\n    orderModal.current.hide();\n  }\n\n  return (\n    <div className='p-3'>\n      <OrderModal\n        closeProductModal={closeOrderModal}\n        getOrders={getOrders}\n        tempOrder={tempOrder}\n      />\n      <h3>訂單列表</h3>\n      <hr />\n      <table className='table'>\n        <thead>\n          <tr>\n            <th scope='col'>訂單 id</th>\n            <th scope='col'>購買用戶</th>\n            <th scope='col'>訂單金額</th>\n            <th scope='col'>付款狀態</th>\n            <th scope='col'>付款日期</th>\n            <th scope='col'>留言訊息</th>\n            <th scope='col'>編輯</th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((order) => {\n            return (\n              <tr key={order.id}>\n                <td>{order.id}</td>\n                <td>\n                  {order.user?.name}\n                  {order.user?.email}\n                </td>\n                <td>${order.total}</td>\n                <td>\n                  {order.is_paid ? (\n                    <span className='text-success fw-bold'>付款完成</span>\n                  ) : (\n                    '未付款'\n                  )}\n                </td>\n                <td>\n                  {order.paid_date\n                    ? new Date(order.paid_date * 1000).toLocaleString()\n                    : '未付款'}\n                </td>\n                <td>{order.message}</td>\n\n                <td>\n                  <button\n                    type='button'\n                    className='btn btn-primary btn-sm'\n                    onClick={() => {\n                      openOrderModal(order);\n                    }}\n                  >\n                    查看\n                  </button>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      <Pagination pagination={pagination} changePage={getOrders} />\n    </div>\n  );\n}\n\nexport default AdminOrders;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}