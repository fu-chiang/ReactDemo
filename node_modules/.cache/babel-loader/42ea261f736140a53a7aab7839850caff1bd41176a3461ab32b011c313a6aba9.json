{"ast":null,"code":"import _objectSpread from\"C:/Users/A3423/Desktop/Project/react-cra/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext}from\"react\";// useContext 跨元件傳遞\nexport var MessageContext=/*#__PURE__*/createContext({});export var initState={type:'',title:'',text:''};// Reducer\nexport var messageReducer=function messageReducer(state,action){switch(action.type){case\"POST_MESSAGE\":return _objectSpread({},action.payload);case\"CLEAR_MESSAGE\":return _objectSpread({},initState);default:return state;}};export function handleSuccessMessage(dispatch,res){dispatch({type:'POST_MESSAGE',payload:{type:'success',title:'更新成功',text:res.data.message}});setTimeout(function(){dispatch({type:'CLEAR_MESSAGE'});},3000);}export function handleErrorMessage(dispatch,error){var _error$response,_error$response$data,_error$response2,_error$response2$data,_error$response3,_error$response3$data;dispatch({type:'POST_MESSAGE',payload:{type:'danger',title:'失敗',text:Array.isArray(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)?error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message.join('、'):error===null||error===void 0?void 0:(_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message}});setTimeout(function(){dispatch({type:'CLEAR_MESSAGE'});},3000);}","map":{"version":3,"names":["createContext","MessageContext","initState","type","title","text","messageReducer","state","action","payload","handleSuccessMessage","dispatch","res","data","message","setTimeout","handleErrorMessage","error","Array","isArray","response","join"],"sources":["C:/Users/A3423/Desktop/Project/react-cra/src/store/messageStore.js"],"sourcesContent":["import { createContext } from \"react\";\n\n// useContext 跨元件傳遞\nexport const MessageContext = createContext({})\n\nexport const initState = {\n  type: '',\n  title: '',\n  text: '',\n};\n\n// Reducer\nexport const messageReducer = (state, action) => {\n  switch (action.type) {\n    case \"POST_MESSAGE\":\n      return {\n        ...action.payload\n      };\n    case \"CLEAR_MESSAGE\":\n      return {\n        ...initState,\n      };\n    default:\n      return state;\n  }\n}\n\nexport function handleSuccessMessage(dispatch, res) {\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'success',\n      title: '更新成功',\n      text: res.data.message,\n    },\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE',\n    });\n  }, 3000);\n}\n\nexport function handleErrorMessage(dispatch, error) {\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'danger',\n      title: '失敗',\n      text: Array.isArray(error?.response?.data?.message)\n        ? error?.response?.data?.message.join('、')\n        : error?.response?.data?.message,\n    },\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE',\n    });\n  }, 3000);\n}"],"mappings":"6HAAA,OAASA,aAAa,KAAQ,OAAO,CAErC;AACA,MAAO,IAAMC,eAAc,cAAGD,aAAa,CAAC,CAAC,CAAC,CAAC,CAE/C,MAAO,IAAME,UAAS,CAAG,CACvBC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EACR,CAAC,CAED;AACA,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIC,KAAK,CAAEC,MAAM,CAAK,CAC/C,OAAQA,MAAM,CAACL,IAAI,EACjB,IAAK,cAAc,CACjB,wBACKK,MAAM,CAACC,OAAO,EAErB,IAAK,eAAe,CAClB,wBACKP,SAAS,EAEhB,QACE,MAAOK,MAAK,CAAC,CAEnB,CAAC,CAED,MAAO,SAASG,qBAAoB,CAACC,QAAQ,CAAEC,GAAG,CAAE,CAClDD,QAAQ,CAAC,CACPR,IAAI,CAAE,cAAc,CACpBM,OAAO,CAAE,CACPN,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,MAAM,CACbC,IAAI,CAAEO,GAAG,CAACC,IAAI,CAACC,OACjB,CACF,CAAC,CAAC,CACFC,UAAU,CAAC,UAAM,CACfJ,QAAQ,CAAC,CACPR,IAAI,CAAE,eACR,CAAC,CAAC,CACJ,CAAC,CAAE,IAAI,CAAC,CACV,CAEA,MAAO,SAASa,mBAAkB,CAACL,QAAQ,CAAEM,KAAK,CAAE,wHAClDN,QAAQ,CAAC,CACPR,IAAI,CAAE,cAAc,CACpBM,OAAO,CAAE,CACPN,IAAI,CAAE,QAAQ,CACdC,KAAK,CAAE,IAAI,CACXC,IAAI,CAAEa,KAAK,CAACC,OAAO,CAACF,KAAK,SAALA,KAAK,kCAALA,KAAK,CAAEG,QAAQ,gEAAf,gBAAiBP,IAAI,+CAArB,qBAAuBC,OAAO,CAAC,CAC/CG,KAAK,SAALA,KAAK,mCAALA,KAAK,CAAEG,QAAQ,kEAAf,iBAAiBP,IAAI,gDAArB,sBAAuBC,OAAO,CAACO,IAAI,CAAC,GAAG,CAAC,CACxCJ,KAAK,SAALA,KAAK,mCAALA,KAAK,CAAEG,QAAQ,kEAAf,iBAAiBP,IAAI,gDAArB,sBAAuBC,OAC7B,CACF,CAAC,CAAC,CACFC,UAAU,CAAC,UAAM,CACfJ,QAAQ,CAAC,CACPR,IAAI,CAAE,eACR,CAAC,CAAC,CACJ,CAAC,CAAE,IAAI,CAAC,CACV"},"metadata":{},"sourceType":"module","externalDependencies":[]}