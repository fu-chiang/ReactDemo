{"ast":null,"code":"import { createContext } from \"react\";\n\n// useContext 跨元件傳遞\nexport const MessageContext = /*#__PURE__*/createContext({});\nexport const initState = {\n  type: '',\n  title: '',\n  text: ''\n};\n\n// Reducer\nexport const messageReducer = (state, action) => {\n  switch (action.type) {\n    case \"POST_MESSAGE\":\n      return {\n        ...action.payload\n      };\n    case \"CLEAR_MESSAGE\":\n      return {\n        ...initState\n      };\n    default:\n      return state;\n  }\n};\nexport function handleSuccessMessage(dispatch, res) {\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'success',\n      title: '更新成功',\n      text: res.data.message\n    }\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE'\n    });\n  }, 3000);\n}\nexport function handleErrorMessage(dispatch, error) {\n  var _error$response, _error$response$data, _error$response2, _error$response2$data, _error$response3, _error$response3$data;\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'danger',\n      title: '失敗',\n      text: Array.isArray(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message.join('、') : error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message\n    }\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE'\n    });\n  }, 3000);\n}","map":{"version":3,"names":["createContext","MessageContext","initState","type","title","text","messageReducer","state","action","payload","handleSuccessMessage","dispatch","res","data","message","setTimeout","handleErrorMessage","error","Array","isArray","response","join"],"sources":["C:/Users/A3423/Desktop/Project/react-cra/src/store/messageStore.js"],"sourcesContent":["import { createContext } from \"react\";\n\n// useContext 跨元件傳遞\nexport const MessageContext = createContext({})\n\nexport const initState = {\n  type: '',\n  title: '',\n  text: '',\n};\n\n// Reducer\nexport const messageReducer = (state, action) => {\n  switch (action.type) {\n    case \"POST_MESSAGE\":\n      return {\n        ...action.payload\n      };\n    case \"CLEAR_MESSAGE\":\n      return {\n        ...initState,\n      };\n    default:\n      return state;\n  }\n}\n\nexport function handleSuccessMessage(dispatch, res) {\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'success',\n      title: '更新成功',\n      text: res.data.message,\n    },\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE',\n    });\n  }, 3000);\n}\n\nexport function handleErrorMessage(dispatch, error) {\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'danger',\n      title: '失敗',\n      text: Array.isArray(error?.response?.data?.message)\n        ? error?.response?.data?.message.join('、')\n        : error?.response?.data?.message,\n    },\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE',\n    });\n  }, 3000);\n}"],"mappings":"AAAA,SAASA,aAAa,QAAQ,OAAO;;AAErC;AACA,OAAO,MAAMC,cAAc,gBAAGD,aAAa,CAAC,CAAC,CAAC,CAAC;AAE/C,OAAO,MAAME,SAAS,GAAG;EACvBC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE,EAAE;EACTC,IAAI,EAAE;AACR,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EAC/C,QAAQA,MAAM,CAACL,IAAI;IACjB,KAAK,cAAc;MACjB,OAAO;QACL,GAAGK,MAAM,CAACC;MACZ,CAAC;IACH,KAAK,eAAe;MAClB,OAAO;QACL,GAAGP;MACL,CAAC;IACH;MACE,OAAOK,KAAK;EAAC;AAEnB,CAAC;AAED,OAAO,SAASG,oBAAoB,CAACC,QAAQ,EAAEC,GAAG,EAAE;EAClDD,QAAQ,CAAC;IACPR,IAAI,EAAE,cAAc;IACpBM,OAAO,EAAE;MACPN,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,MAAM;MACbC,IAAI,EAAEO,GAAG,CAACC,IAAI,CAACC;IACjB;EACF,CAAC,CAAC;EACFC,UAAU,CAAC,MAAM;IACfJ,QAAQ,CAAC;MACPR,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,CAAC;AACV;AAEA,OAAO,SAASa,kBAAkB,CAACL,QAAQ,EAAEM,KAAK,EAAE;EAAA;EAClDN,QAAQ,CAAC;IACPR,IAAI,EAAE,cAAc;IACpBM,OAAO,EAAE;MACPN,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAEa,KAAK,CAACC,OAAO,CAACF,KAAK,aAALA,KAAK,0CAALA,KAAK,CAAEG,QAAQ,4EAAf,gBAAiBP,IAAI,yDAArB,qBAAuBC,OAAO,CAAC,GAC/CG,KAAK,aAALA,KAAK,2CAALA,KAAK,CAAEG,QAAQ,8EAAf,iBAAiBP,IAAI,0DAArB,sBAAuBC,OAAO,CAACO,IAAI,CAAC,GAAG,CAAC,GACxCJ,KAAK,aAALA,KAAK,2CAALA,KAAK,CAAEG,QAAQ,8EAAf,iBAAiBP,IAAI,0DAArB,sBAAuBC;IAC7B;EACF,CAAC,CAAC;EACFC,UAAU,CAAC,MAAM;IACfJ,QAAQ,CAAC;MACPR,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,CAAC;AACV"},"metadata":{},"sourceType":"module","externalDependencies":[]}