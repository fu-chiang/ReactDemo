{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\A3423\\\\Desktop\\\\Project\\\\react-cra\\\\src\\\\pages\\\\front\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useOutletContext, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductDetail() {\n  _s();\n  const [product, setProduct] = useState({});\n  const [cartQuantity, setCartQuantity] = useState(1);\n  const {\n    id\n  } = useParams();\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    getCart\n  } = useOutletContext();\n  const getProduct = async id => {\n    const productRes = await axios.get(`/v2/api/${process.env.REACT_APP_API_PATH}/product/${id}`);\n    console.log(productRes);\n    setProduct(productRes.data.product);\n  };\n  const addToCart = async () => {\n    const data = {\n      data: {\n        product_id: product.id,\n        qty: cartQuantity\n      }\n    };\n    setIsLoading(true);\n    try {\n      const res = await axios.post(`/v2/api/${process.env.REACT_APP_API_PATH}/cart`, data);\n      console.log(res);\n      getCart();\n      setIsLoading(false);\n    } catch (error) {\n      console.log(error);\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    getProduct(id);\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container full-height\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '400px',\n        backgroundImage: `url(${product.imageUrl}) NoRepeat`,\n        backgroundPosition: 'center center',\n        backgroundRepeat: 'NoRepeat'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-between mt-4 mb-7\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-7\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-0\",\n          children: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"fw-bold\",\n          children: [\"NT$ \", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: product.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-4\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.imageUrl,\n            alt: \"\",\n            className: \"img-fluid mt-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-3 border mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group-prepend\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-dark rounded-0 border-0 py-3\",\n              type: \"button\",\n              id: \"button-addon1\",\n              onClick: () => setCartQuantity(pre => pre === 1 ? pre : pre - 1),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-dash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"form-control border-0 text-center my-auto shadow-none\",\n            placeholder: \"\",\n            \"aria-label\": \"Example text with button addon\",\n            \"aria-describedby\": \"button-addon1\",\n            readOnly: true,\n            value: cartQuantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group-append\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-dark rounded-0 border-0 py-3\",\n              type: \"button\",\n              id: \"button-addon2\",\n              onClick: () => setCartQuantity(pre => pre + 1),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-dark w-100 rounded-0 py-3\",\n          onClick: () => addToCart(),\n          disabled: isLoading,\n          children: \"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetail, \"DHxNM4np3VCvQXXfbvgVoiDf664=\", false, function () {\n  return [useParams, useOutletContext];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["useEffect","useState","axios","useOutletContext","useParams","ProductDetail","product","setProduct","cartQuantity","setCartQuantity","id","isLoading","setIsLoading","getCart","getProduct","productRes","get","process","env","REACT_APP_API_PATH","console","log","data","addToCart","product_id","qty","res","post","error","minHeight","backgroundImage","imageUrl","backgroundPosition","backgroundRepeat","title","price","content","pre"],"sources":["C:/Users/A3423/Desktop/Project/react-cra/src/pages/front/ProductDetail.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useOutletContext, useParams } from 'react-router-dom';\n\nfunction ProductDetail() {\n  const [product, setProduct] = useState({});\n  const [cartQuantity, setCartQuantity] = useState(1);\n  const { id } = useParams();\n  const [isLoading, setIsLoading] = useState(false)\n  const { getCart } = useOutletContext();\n\n  const getProduct = async (id) => {\n    const productRes = await axios.get(\n      `/v2/api/${process.env.REACT_APP_API_PATH}/product/${id}`,\n    );\n    console.log(productRes);\n    setProduct(productRes.data.product);\n  };\n\n  const addToCart = async () => {\n    const data = {\n      data: {\n        product_id: product.id,\n        qty: cartQuantity,\n      },\n    };\n    setIsLoading(true);\n    try {\n      const res = await axios.post(\n        `/v2/api/${process.env.REACT_APP_API_PATH}/cart`,\n        data,\n      );\n      console.log(res);\n      getCart();\n      setIsLoading(false)\n    } catch (error) {\n      console.log(error);\n      setIsLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    getProduct(id);\n  }, [id]);\n\n\n  return (\n    <div className='container full-height'>\n      <div\n        style={{\n          minHeight: '400px',\n          backgroundImage: `url(${product.imageUrl}) NoRepeat`,\n          backgroundPosition: 'center center',\n          backgroundRepeat: 'NoRepeat',\n\n        }}\n      ></div>\n      <div className='row justify-content-between mt-4 mb-7'>\n        <div className='col-md-7'>\n          <h2 className='mb-0'>{product.title}</h2>\n          <p className='fw-bold'>NT$ {product.price}</p>\n          <p>{product.content}</p>\n          <div className='my-4'>\n            <img src={product.imageUrl} alt='' className='img-fluid mt-4' />\n          </div>\n        </div>\n        <div className='col-md-4'>\n          <div className='input-group mb-3 border mt-3'>\n            <div className='input-group-prepend'>\n              <button\n                className='btn btn-outline-dark rounded-0 border-0 py-3'\n                type='button'\n                id='button-addon1'\n                onClick={() =>\n                  setCartQuantity((pre) => (pre === 1 ? pre : pre - 1))\n                }\n              >\n                <i className='bi bi-dash'></i>\n              </button>\n            </div>\n            <input\n              type='number'\n              className='form-control border-0 text-center my-auto shadow-none'\n              placeholder=''\n              aria-label='Example text with button addon'\n              aria-describedby='button-addon1'\n              readOnly\n              value={cartQuantity}\n            />\n            <div className='input-group-append'>\n              <button\n                className='btn btn-outline-dark rounded-0 border-0 py-3'\n                type='button'\n                id='button-addon2'\n                onClick={() => setCartQuantity((pre) => pre + 1)}\n              >\n                <i className='bi bi-plus'></i>\n              </button>\n            </div>\n          </div>\n          <button\n            type='button'\n            className='btn btn-dark w-100 rounded-0 py-3'\n            onClick={() => addToCart()}\n            disabled={isLoading}\n          >\n            加入購物車\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ProductDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}